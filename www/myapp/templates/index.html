{% extends 'base.html' %}
{% block title %} 首页 {% endblock %}
{% block script %}
{% endblock %}
{% block content %}
    <!-- sidebar -->
    <div class="uk-width-medium-1-5">
        <div class="uk-panel uk-panel-box uk-text-center">
            <img class="uk-border-circle" width="100" height="100" src="{{ url_for('static', filename=config['WEB_LOGO']) }}" alt="">
            <p>本程序仅能预览AutoCAD图纸和pdf图纸。AutoCAD图纸预览请使用IE内核浏览器，版本不低于IE9。首次使用请下载安装
            <a href="./MxDrawX.zip">IE浏览器插件</a>。
            若无法预览pdf图纸，则需要安装 <a href="./pdf.exe">pdf阅读软件</a>。</p>
        </div>
        <div class="uk-panel uk-panel-box">
            <h3 class="uk-panel-title"><i class="uk-icon-folder-open"></i> 图纸目录</h3>
            <ul class="uk-list uk-list-line">
                {% for dir in args.dirlist %}
                    <li><a href="{{ url_for('index', dir_cu=dir, page_cu=1) }}">
                    {% if dir == args.dir_cu %}
                        <i class="uk-icon-folder-open"></i> {{ dir }}
                    {% else %}
                        <i class="uk-icon-folder"></i> {{ dir }}
                    {% endif %}
                    </a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <!-- end sidebar -->

    <div class="uk-width-medium-4-5 uk-row-first">
        <div class="uk-panel uk-panel-box uk-panel-box-primary uk-panel-header">
            <h3 class="uk-panel-title">
            {% if args.dir_cu == '' %}
                <i class="uk-icon-file"></i> 当前打开的目录【 图纸根目录 】下的文件:
            {% else %}
                <i class="uk-icon-file"></i> 当前打开的目录【 {{ args.dir_cu }} 】下的文件:
            {% endif %}
            </h3>
            <ul class="uk-grid uk-grid-width-small-1-2 uk-grid-width-medium-1-3 uk-grid-width-large-1-5" data-uk-grid-margin>
            {% for file in args.filelist[args.page.page_start:args.page.page_start+args.page.range] %}
                <li><div class="uk-panel uk-panel-box">
                    <a target="_aboutblank" href="{{ url_for('show', dir=args.dir_cu, filename=file) }}">{{ file }}</a>
                </div></li>
            {% endfor %}
            </ul>
        </div>
        <ul class="uk-pagination" data-uk-margin>
        {% for i in range(1, args.page.page_all+1) %}
            {% if args.page_cu == i %}
                <li class="uk-active"><span>{{ i }}</span></li>
            {% else %}
                <li><a href="{{ url_for('index', dir_cu=args.dir_cu, page_cu=i) }}">{{ i }}</a></li>
            {% endif %}
        {% endfor %}
        </ul>
    </div>
{% endblock %}
